<h1>{{ idol.name }} 스케줄</h1>

{% if user.is_authenticated %}
    <h2>스케줄 목록</h2>
    <ul>
        {% for schedule in idol.schedules.all %}
            <li>
                {{ schedule.title }} ({{ schedule.start_time }} ~ {{ schedule.end_time }})
                <form method="post" action="/test/add_user_schedule/{{ schedule.id }}/" style="display:inline;">
                    {% csrf_token %}
                    {% if schedule.is_added_to_user_schedule %}
                        <button type="submit" name="action" value="remove">내 스케줄에서 제거</button>
                    {% else %}
                        <button type="submit" name="action" value="add">내 스케줄에 추가</button>
                    {% endif %}
                </form>
            </li>
        {% empty %}
            <li>등록된 스케줄이 없습니다.</li>
        {% endfor %}
    </ul>
{% else %}
    <p>로그인해야 스케줄을 볼 수 있습니다.</p>
{% endif %}

<p><a href="/test/idols/">아이돌 목록으로 돌아가기</a></p>
<p><a href="/test/">메인으로 돌아가기</a></p>
